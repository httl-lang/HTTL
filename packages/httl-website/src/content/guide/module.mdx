import { FileTree } from 'nextra/components'

# Api Object

HTTL introduces the concept of the `API` object â€” a virtual entity that acts as a centralized container for global headers, directives, and variables defined within a file.

> [!NOTE]
>
> A default API object is automatically created when a file begins processing.
>

All global-level headers, directives, and variable declarations are inherently associated with this default API object, serving as the foundational configuration context for subsequent requests.

For example, if you specify a global header in a file, it is automatically linked to the default API object and will be applied to all requests within that file.

**Example:**

```httl
# Authorization header is applied to the all requests below
Authorization: Bearer token

get /users

post /users {
  name: "morpheus",
  job: "leader"
}

delete /users/1
```

Also, any api elements can be overridden within the file by redefining them.

```httl {6}
@base: https://httl.dev/api

get /users # https://httl.dev/api/users

# @base is overridden
@base: https://httl.dev/api/v2

get /users # https://httl.dev/api/v2/users
```

## Import

When you import a file, the API object of the imported file is merged with the current API object.

We will cover this in more detail on the [Use page](./use)


# Use

As any other programming language, HTTL has a module system. 
You can import modules and use their functions in your queries.

let's say you have a module called `auth.httl` with the following content:

```httl filename="auth.httl"
@spec: https://httl.dev/api/spec.json
@auth-basic: admin admin

post /auth 
 as auth

Authorization: Bearer {auth.token}

```

now you can import this module in your query like this:

```httl filename="user-creation-test.httl" {1}
use './auth.httl'

put /users/1 {
	username: "jdoe_admin",
  email: "jdoe_admin@example.com",
  firstName: "John Admin",
  lastName: "Doe Admin",
	admin: true
}

delete /users/1 

```

by using `use './auth.httl'` noth `put` and `delete` requests will have the `Authorization` header set to `Bearer {auth.token}` that was defined in the `auth.httl` module.
Also you will have intellisense for the requests 

### Module resolution

The module path is resolved relative to the current file. mostly like in Javascript. 
so let say we have this structure:
 
<FileTree>
  <FileTree.Folder name="src" defaultOpen>
    <FileTree.Folder name="modules" defaultOpen>
      <FileTree.File name="auth.httl" />
    </FileTree.Folder>
    <FileTree.Folder name="tests" defaultOpen>
      <FileTree.File name="user-creation-test.httl" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>


and in the `user-creation-test.httl` file you want to import the `auth.httl` module you can do it like this:

```httl
use '../modules/auth.httl'
```